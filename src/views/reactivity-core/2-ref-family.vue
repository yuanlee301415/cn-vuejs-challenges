<script setup lang="ts">
import type {Ref} from "vue";
import {ref, reactive} from "vue"

const initial = ref(10)
const count = ref(0)

// æŒ‘æˆ˜ 1: æ›´æ–° ref
function update(value) {
  // å®ç°...
}

/**
 * æŒ‘æˆ˜ 2: æ£€æŸ¥`count`æ˜¯å¦ä¸ºä¸€ä¸ª ref å¯¹è±¡
 * ç¡®ä¿ä»¥ä¸‹è¾“å‡ºä¸º1
 */
console.log('1:',
    // impl ? 1 : 0
)

/**
 * æŒ‘æˆ˜ 3: å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ª refï¼Œåˆ™è¿”å›å†…éƒ¨å€¼ï¼Œå¦åˆ™è¿”å›å‚æ•°æœ¬èº«
 * ç¡®ä¿ä»¥ä¸‹è¾“å‡ºä¸ºtrue
 */
function initialCount(value: number | Ref<number>) {
  // ç¡®ä¿ä»¥ä¸‹è¾“å‡ºä¸ºtrue
  console.log('initialCount>true:', value === 10)
}

initialCount(initial)

/**
 * æŒ‘æˆ˜ 4:
 * ä¸ºæºå“åº”å¼å¯¹è±¡ä¸Šçš„æŸä¸ª `property` æ–°åˆ›å»ºä¸€ä¸ª `ref`ã€‚
 * ç„¶å,`ref` å¯ä»¥è¢«ä¼ é€’ï¼Œå®ƒä¼šä¿æŒå¯¹å…¶æº`property`çš„å“åº”å¼è¿æ¥ã€‚
 * ç¡®ä¿ä»¥ä¸‹è¾“å‡ºä¸ºtrue
 */
const state = reactive({
  foo: 1,
  bar: 2,
})
const fooRef = ref() // ä¿®æ”¹è¿™é‡Œçš„å®ç°...

// ä¿®æ”¹å¼•ç”¨å°†æ›´æ–°åŸå¼•ç”¨
fooRef.value++
console.log('state.foo>true:', state.foo === 2)

// ä¿®æ”¹åŸå¼•ç”¨ä¹Ÿä¼šæ›´æ–°`ref`
state.foo++
console.log('fooRef.value>true:', fooRef.value === 3)

</script>

<template>
  <h2>
    ref å…¨å®¶æ¡¶ ç®€å• #Composition API #Reactivity:Core
    <hr>
    åœ¨è¿™ä¸ªæŒ‘æˆ˜ä¸­ï¼Œä½ å°†ä½¿ç”¨ å“åº”å¼ API: ref æ¥å®Œæˆå®ƒã€‚ ä»¥ä¸‹æ˜¯ä½ è¦å®ç°çš„å†…å®¹ ğŸ‘‡:
    <hr>
  </h2>
  <div>
    <button @click="update(count-1)">-</button>
    {{ count }}
    <button @click="update(count+1)">+</button>
  </div>
</template>
